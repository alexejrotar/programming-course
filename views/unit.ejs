<!doctype html>
<html>
  <head>
    <title><%= title %></title>
    <%- include('views/head') %>
    <link rel="stylesheet" href="../../build/styles.css">
    <script src="../../src/util.js"></script>
    <script src="../../src/testlib.js"></script>
  </head>
  <body onload="<%= locals.renderFunction ? `${renderFunction}()`: '' %>">
    <div class="container">
      <h1><%- longTitle %></h1>
      <p class="description"><%- description %></p>

      <%_ subunits.forEach(function(subunit) { %>
        <section class="subunit">
          <h2><%= subunit.title %></h2>
          <%- include(`${basepath}/${subunit.identifier}/subunit`) %>
        </section>
        <%_ if ("script" in subunit) { %>
          <script src="<%= `${subunit.identifier}/${subunit.identifier}.js` %>"></script>
        <%_ } %>
        <%_ if ("test" in subunit) { %>
          <script src="<%= `${subunit.identifier}/${subunit.identifier}Test.js` %>"></script>
        <%_ } %>
      <%_ }) %>
    </div>
  </body>
</html>
